schemaVersion: 2.0.0

metadataTest:
  entrypoint: ["/usr/local/bin/jenkins-agent"]

fileExistenceTests:

  - name: 'Jenkins agent'
    path: '/usr/local/bin/jenkins-agent'
    shouldExist: true
    isExecutableBy: 'any'
  - name: 'Jenkins agent jar file'
    path: '/usr/share/jenkins/agent.jar'
    shouldExist: true
  - name: 'directory for jenkins user created'
    path: '/home/jenkins'
    shouldExist: true
    permissions: 'drwxr-x---'


fileContentTests:
  - name: 'user created as non-root user'
    path: '/etc/passwd'
    expectedContents: ['.*jenkins:x:100\d:100\d.*']
